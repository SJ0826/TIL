# HTTP 상태코드

## HTTP 상태코드

 <h3>: 클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능</h3><br>

상태코드는 굉장히 광범위하기 때문에 실무에서 범위를 잡고 쓰는 경우가 많다.

- `1xx` (Informational) : 요청이 수신되어 처리중 (거의 사용 x)
- `2xx` (Successful) : 요청이 정상 처리
- `3xx` (Redirection) : 요청을 완료하려면 추가 행동이 필요
- `4xx` (Client Error) : 클라이언트 오류, 잘못된 문법등으로 서버가 요청을 수행할 수 없음
- `5xx` (Server Error) : 서버 오류, 서버가 정상 요청을 처리하지 못함

만약 클라이언트가 인식할 수 없는 상태코드를 서버가 반환하면,<br>
클라이언트는 상위 상태코드로 해석해서 처리하기때문에<br>
미래에 새로운 상태코드가 추가되어도 클라이언트를 변경하지 않아도 된다.<br>
예) 299 ??? -> 2xx (Successful) / 451 ??? -> 4xx (Client Error)<br><br>

## 2xx (Successful)

<h3>: 클라이언트의 요청을 성공적으로 처리</h3>

- `200`: OK
- `201` : Created
- `202` : Accepted
- `204` : No Content

### <200 OK>: 요청 성공

<br>

### <201 Created>

: 요청 성공해서 새로운 리소스가 생성됨<br>
클라이언트의 요청을 가지고 서버에서 리소스를 생성한다.<br>
생성된 리소스는 응답의 `Location` 헤더 필드로 식별된다.<br><br>

### <202 Accepted>

: 요청이 접수되었으나 처리가 완료되지 않았음<br>
배치처리 같은 곳에서 사용된다.<br>
실무에서는 잘 사용되지 않는다.<br><br>

### <204 NoContent>

: 서버가 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼 데이터가 없음.<br>
예시로 웹 문서 편집기의 save 버튼이 있다.<br>
save버튼을 눌러도 같은 화면을 유지하고 아무 결과가 없다.<br>
결과 내용이 없어도 204 메시지만으로 성공을 인식할 수 있다.

## 3xx - 리다이렉션

요청을 완료하기 위해 유저 에이전트의 추가 조치가 필요한 것을 리다이렉션(Redirection)이라 한다.<br><br>

웹 브라우저는 3xx 응답의 결과에 Location 헤더가 있으면, Location 위치로 자동 이동한다.

## 리다이렉션 종류

### <영구 리다이렉션><br>

특정 리소스의 `URI`가 영구적으로 이동한다.<br><BR>
따라서 원래 `URL`을 사용하지 않고, 검색 엔진 등에서도 변경을 인지한다.<br>

1. `301` Moved Permanently<br>
   ![image](https://user-images.githubusercontent.com/56298540/190341146-1e9ea2a8-bfdf-450e-b988-bae329e91619.png)

- 리다이렉트시 요청 메서드가 `GET`으로 변하고, 본문이 제거될 수 있다.
- 대부분 `GET`으로 바꾸지만 명확하지 않다는 단점이 있다.
- 실무에서 가장 많이 사용한다.

2. `308` Permanent Redirect
   ![image](https://user-images.githubusercontent.com/56298540/190341264-296ebab7-228c-4dd4-9b0a-ca119ff970b7.png)

- `301`과 기능은 같지만 리다이렉트시 요청 메서드와 본문을 유지한다.(처음 `POST`를 보내면 리다이렉트도 `POST` 유지)

### <일시적인 리다이렉션>

리소스의 `URI`가 일시적으로 변경한다.<BR><BR>
따라서 검색 엔진 등에서 `URI`를 변경하면 안된다.

1. `302`Found
   ![image](https://user-images.githubusercontent.com/56298540/190344135-3848ad86-01e8-49a1-9051-df00247905c5.png)

   > PRG(POST-Redirection-GET) 예시

   `URL`이 이미 `POST`에서 `GET`으로 리다이렉트 되었기 때문에, 새로고침해도 `GET`으로 결과 화면만 조회한다.

- 리다이렉트시 요청 메서드가 `GET`으로 변하고, 본문이 제거될 수 있다.
- 대부분 `GET`으로 바꾸지만 명확하지 않다는 단점이 있다.
- 실무에서 가장 많이 사용한다.

* 사용자 입장에서 실수로 새로고침다하더라도 문제가 생기지 않아 사용성이 좋다.
* 서버 입장에서도 오류가 줄어든다.

2. `307` Temporary Redirect

- `302`와 기능은 같지만 리다이렉트 요청시 본문을 유지한다.(요청 메서드를 변경하면 안된다.
  )

3. `303` See Other

- 302와 기능은 같지만 리다이렉트 요청 메서드가 `GET`으로 변경된다.

### <기타 리다이렉션>

1. `300` Multiple Choices: 안쓴다.
2. `304` Not Modified<br>_ 캐시를 목적으로 쓴다.<br>_ 클라이언트에게 리소스가 수정되지 않았음을 알려준다. 따라서 클라이언트는 **로컬 PC에 저장된 캐시를 재사용**한다.<br>_ `304`응답은 로컬 캐시를 사용해야 하므로 응답에 메시지 바디를 포함하면 안된다.<br> _ 조건부 `GET`, `HEAD`요청시 사용한다.

## 4xx - 클라이언트 오류

오류의 원인이 클라이언트에 있다.<br><br>

클라이언트가 이미 잘못된 데이터로 요청을 보내고 있기 때문에, 똑같은 재시도가 실패한다.<br><br>

즉, 복구가 불가능하다.

1. `400` Bad Request<br>
   **클라이언트가 잘못되 요청을 해서 서버가 요청을 처리할 수 없는 경우**이다.<br>
   클라이언트는 요청 내용을 다시 검토하고 보내야한다.<br>
   예) 요청 파라미터가 잘못되거나, API 스펙이 맞지 않을 때<br>

2. `401` Unauthorized
   **클라이언트가 해당 리소스에 대한 인증이 필요한 경우**이다.<br>
   오류 발생시 응담에 WWW-Authenticate 헤더와 함께 인증 방법을 설명한다.<br>

3. `403` Forbidden
   **서버가 요청을 이해했지만 승인을 거부한 경우**이다.<br>
   인증 자격 증명은 있지만, 접근 권한이 불충분한 경우에 해당한다.<br>

4. `404` Not Found
   **요청 리소스를 찾을 수 없는 경우**이다.
   요청 리소스가 서버에 없거나, 클라이언트가 권한이 부족한 리소스에 접근하여 해당 리소스를 숨기고 싶을 때에 발생하는 오류이다.<br>

## 5xx - 서버 오류

**서버 문제로 오류가 발생한 경우**이다.<br><br>

서버에 문제가 있기 때문에 재시도 하면 성공할 수도 있다.<br>

1. `500` Internal Server Error<br>
   **서버 문제로 오류가 발생한 경우**이다.<br>
   애매하면 `500`오류가 발생한다.<br>

2. `503` Service Unavailable
   **서비스가 이용 불가한 경우**이다.<br>
   서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없는 경우를 뜻한다.<br>

## 출처

- [모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC)
